<img alt="" src="/shared/app-icons/logo-bg.png"/>

<h1 class="text-center">南校聯合特約</h1>
<p class="text-center">南校聯合特約是我獨立開發的網站，整合商家資訊、學生憑證與美食地圖。學生可透過手機出示 QR Code 驗證身份，無需攜帶學生證，即時查詢附近合作商家與優惠內容。<a href="https://cooperativeshops.org">點此</a> 進入網站。</p>

---

## 目錄

- [專案簡介](#專案簡介)
- [緣起與問題分析](#緣起與問題分析)
- [設計思考與系統架構](#設計思考與系統架構)
- [實作與技術細節](#實作與技術細節)
- [使用者體驗與設計考量](#使用者體驗與設計考量)
- [學習與反思](#學習與反思)
- [展望與延伸](#展望與延伸)

---

## 專案簡介

我是一名高中生，獨立開發了南校聯合特約網站，整合 26 所台南高中職，超過 200 家特約商家的資訊。學生可使用手機顯示 QR Code 驗證身份，無需攜帶實體學生證，就能查詢附近合作商家、優惠內容與地點。這個專案旨在提升學生使用體驗，同時減輕商家辨識學生身份的負擔，成果為一個實際可用的網站與 iOS 應用。

<img alt="網站首頁截圖" src="/apps/frontend/public/screenshots/intro-page.png" />

## 緣起與問題分析

作為學生會的成員，我常聽到同學抱怨忘帶學生證無法享受優惠，商家也因 26 所學校的學生證樣式不同而難以辨識。透過與南校聯合特約負責人討論後，整理出以下主要問題：

- 商家資訊主要透過 Instagram 公告，難以搜尋或按地點查找。
- Google Maps 缺乏詳細優惠資訊，使用者需頻繁切換平台。
- 許願系統使用 Google Form，導致資料重複且難以整理。
- 手動管理商家資料與地圖標註耗時，效率低落。

這些問題促使我開發一個整合平台，解決學生與商家的痛點。

---

## 設計思考與系統架構

為了解決上述問題，我設計了一個數位化平台，核心理念是簡化學生驗證流程並提供商家清晰的資訊管理方式。系統架構如下：

| 類別       | 技術                                             |
| ---------- | ------------------------------------------------ |
| 前端       | `React`, `TypeScript`, `Tailwind CSS`, `daisyUI` |
| 後端       | `NestJS`, `TypeScript`, `Prisma`                 |
| 資料庫     | `PostgreSQL` (hosted on `Supabase`)              |
| iOS App    | `Swift`, `SwiftUI`, `QRScanner`                  |
| 身分驗證   | `Google OAuth 2.0`, `JWT`                        |
| 部署       | `Cloudflare Pages` (前端), `Zeabur` (後端)       |
| 監控與日誌 | `BetterStack`                                    |

## 實作與技術細節

### 資料庫設計

- `School`：儲存 26 所合作學校的資料。
- `Account`：管理認證相關資料。
- `User`：儲存用戶個人資訊。
- `AuthSession`：記錄 Refresh Token 與設備 ID，用於追蹤登入狀態與裝置，支援單設備多帳號切換。

### 登入與註冊

網站支援 Google OAuth 2.0 與帳密登入。若學校提供統一 Google 帳號，則檢查 email 後綴（如 `@example.suffix.com`）進行驗證；否則使用帳密登入，檢查學號格式。

### 多帳號登入

我將 Account 與 User 模型分離，儲存認證與用戶資訊，並在 AuthSession 加入設備 ID，實現單設備多帳號並存與無縫切換，提升使用體驗。

---

## 使用者體驗與設計考量

為了讓學生快速使用服務，我在網站首頁（/）加入判斷邏輯：若用戶曾登入過（`localStorage.isLoggedIn === "true"`），則自動導向 `/home`。此頁面會在頁面恢復後直接顯示用戶的專屬 QR Code，省去手動點擊步驟，簡化操作流程。同時，我設計了直觀的導航列與地圖介面，讓用戶能快速查找附近商家與優惠資訊，減少學習成本。

而考慮到出門在外可能有地下室、郊區或行動數據被限制等狀況，我將 QR code 設計為可截圖保存的形式，並以 HMAC 搭配該用戶獨有的 `salt` 驗證該 QR 的正確性。

---

## 學習與反思

這是我獨立完成的專案，從前端、後端到 iOS 應用，我學習並應用了多種技術，包括 React、NestJS 與 SwiftUI。過程中，我學會在系統設計中平衡安全性與使用體驗，例如以 HMAC 簽章確保資料安全，同時維持登入流程的流暢。這專案不僅解決了學生與商家的實際問題，也讓我培養了獨立解決問題的能力，對技術創新充滿熱情。

---

## 展望與延伸

我計畫於 2026 年 1 月前完成以下主要功能：

- 開發 Android app，實現跨平台支援。
- 實作 `Shop` 模組，供管理商家基本資料、優惠內容與地點。
- 實作 `Scan` 模組，記錄用戶與商家間的掃描關係（含掃描者、被掃描者與時間），用於分析用戶活躍地點與生成商家排行榜，提升曝光度。
- 實作 `Wish` 功能，記錄學生許願並防止重複資料，預計於 2026 年完成。
- 若數據量足夠，開發基於用戶足跡與收藏內容的個人化推薦演算法。

由於本服務自 2026/01/01 起正式啟用，我將在此之前完成 Android、`Shop` 與 `Scan` 三項核心開發。

---

### 永續經營規劃

由於此產品仍與我個人開發綁定性較高，我與南校聯合特約負責人、學生會會長及校內老師討論後，決議日後將系統逐步轉為可長期維運的架構。未來若條件允許，將持續開發後續管理功能，包括但不限於：

1. 後台管理系統：可從後台進行合作商家、合作學校、Logo、Email 與學號規則等項目之管理與更新。
2. 多管理員制度：每所合作學校可設定最多 `n`（`n` 未定）位管理員，以分散維護工作負擔。

---

### 管理系統預期成效

此系列功能完成後，可進一步簡化學生會在簽約與維護階段的行政流程：

1. 即時地點登錄：簽約時，填寫表單即可一鍵取用現場地理位置作為店家位置，免除後續人工地圖標註。
2. 許願清單整合：`Wish` 可作為可互動實體，管理員可直接對許願內容建立合作紀錄，提出方亦能查看願望實現進度。
3. 重複請求檢查：建立新商家請求時，系統自動模糊比對現有資料，避免重複登錄與手動查重。

---

這些功能的實現，將使南校聯合特約不僅是一個學生優惠平台，更成為一個能持續成長、由多校共同維護的開放性系統。
